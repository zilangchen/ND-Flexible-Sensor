# GPU ç®¡ç†å™¨å¿«é€Ÿä¸Šæ‰‹æŒ‡ä»¤é›†

> æ–°æ‰‹å‹å¥½çš„å‘½ä»¤è¡ŒæŒ‡ä»¤é›†ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å³å¯ä½¿ç”¨ï¼

## ğŸš€ åŸºç¡€æ“ä½œï¼ˆ90%çš„æƒ…å†µéƒ½åœ¨ç”¨è¿™äº›ï¼‰

### 1. æŸ¥çœ‹å½“å‰é›†ç¾¤çŠ¶æ€

```bash
python scripts/gpu_manager/gpu_manager.py --status
```

**ä½œç”¨**ï¼šä¸€æ¬¡æ€§æŸ¥çœ‹ GPU é›†ç¾¤çŠ¶æ€ã€å¯ç”¨èµ„æºã€ä½ çš„ä½œä¸šæƒ…å†µ

### 2. å¯åŠ¨å®æ—¶ç›‘æ§

```bash
tmux new-session -d -s gpu_monitor 'python scripts/gpu_manager/gpu_manager.py'
```

**ä½œç”¨**ï¼šåå°å¯åŠ¨å®æ—¶ç›‘æ§ï¼Œéšæ—¶æŸ¥çœ‹é›†ç¾¤å˜åŒ–

### 3. è¿›å…¥ç›‘æ§ç•Œé¢

```bash
tmux attach -t gpu_monitor
```

**ä½œç”¨**ï¼šæŸ¥çœ‹å®æ—¶ GPU çŠ¶æ€ï¼ˆæŒ‰ Ctrl+B å†æŒ‰ D é€€å‡ºä½†ä¿æŒè¿è¡Œï¼‰

### 4. ç”³è¯· GPU èµ„æº

```bash
# ç”³è¯·1ä¸ªGPU
python scripts/gpu_manager/gpu_manager.py --request 1

# ç”³è¯·2ä¸ªGPU
python scripts/gpu_manager/gpu_manager.py --request 2

# ç”³è¯·4ä¸ªGPU
python scripts/gpu_manager/gpu_manager.py --request 4
```

**ä½œç”¨**ï¼šæ‰‹åŠ¨ç”³è¯·æŒ‡å®šæ•°é‡çš„ GPU

### 5. æŸ¥çœ‹æˆ‘çš„ä½œä¸š

```bash
qstat -u $USER
```

**ä½œç”¨**ï¼šæŸ¥çœ‹ä½ æäº¤çš„æ‰€æœ‰ä½œä¸šçŠ¶æ€

## ğŸ¤– è‡ªåŠ¨åŒ–æ“ä½œ

### 6. å¯åŠ¨è‡ªåŠ¨ç®¡ç†æ¨¡å¼

```bash
tmux new-session -d -s gpu_auto 'python scripts/gpu_manager/gpu_manager.py --manage'
```

**ä½œç”¨**ï¼šè‡ªåŠ¨ç»´æŒ 1-2 ä¸ª GPUï¼Œæœ‰èµ„æºæ—¶è‡ªåŠ¨ç”³è¯·

### 7. è¿›å…¥è‡ªåŠ¨ç®¡ç†ç•Œé¢

```bash
tmux attach -t gpu_auto
```

**ä½œç”¨**ï¼šæŸ¥çœ‹è‡ªåŠ¨ç®¡ç†çŠ¶æ€

## ğŸ› ï¸ ç®¡ç†æ“ä½œ

### 8. é‡Šæ”¾ä½œä¸š

```bash
# å…ˆæŸ¥çœ‹ä½œä¸šID
qstat -u $USER

# é‡Šæ”¾æŒ‡å®šä½œä¸šï¼ˆæ›¿æ¢1234567ä¸ºå®é™…IDï¼‰
python scripts/gpu_manager/gpu_manager.py --release 1234567
```

**ä½œç”¨**ï¼šé‡Šæ”¾ä¸éœ€è¦çš„ GPU ä½œä¸š

### 9. æ‰¹é‡é‡Šæ”¾ä½œä¸š

```bash
# é‡Šæ”¾æ‰€æœ‰NDFSå¼€å¤´çš„ä½œä¸š
qdel $(qstat -u $USER | grep "NDFS" | awk '{print $1}')
```

**ä½œç”¨**ï¼šä¸€é”®æ¸…ç†ç®¡ç†å™¨ç”³è¯·çš„ä½œä¸š

### 10. å…³é—­æ‰€æœ‰ tmux ä¼šè¯

```bash
tmux kill-server
```

**ä½œç”¨**ï¼šå…³é—­æ‰€æœ‰åå°ç›‘æ§å’Œç®¡ç†è¿›ç¨‹

## ğŸ“‹ å¸¸ç”¨ç»„åˆæ“ä½œ

### å¿«é€Ÿå¼€å§‹æµç¨‹

```bash
# 1. æŸ¥çœ‹é›†ç¾¤çŠ¶æ€
python scripts/gpu_manager/gpu_manager.py --status

# 2. å¯åŠ¨ç›‘æ§
tmux new-session -d -s gpu_monitor 'python scripts/gpu_manager/gpu_manager.py'

# 3. ç”³è¯·èµ„æºï¼ˆæ ¹æ®éœ€è¦é€‰æ‹©æ•°é‡ï¼‰
python scripts/gpu_manager/gpu_manager.py --request 2
```

### æ—¥å¸¸ä½¿ç”¨æµç¨‹

```bash
# 1. è¿›å…¥ç›‘æ§ç•Œé¢
tmux attach -t gpu_monitor

# 2. æŸ¥çœ‹ä½œä¸šçŠ¶æ€
qstat -u $USER

# 3. æ ¹æ®éœ€è¦ç”³è¯·æˆ–é‡Šæ”¾èµ„æº
```

### å®Œå…¨æ¸…ç†æµç¨‹

```bash
# 1. é‡Šæ”¾æ‰€æœ‰ä½œä¸š
qdel $(qstat -u $USER | grep "NDFS" | awk '{print $1}')

# 2. å…³é—­æ‰€æœ‰ä¼šè¯
tmux kill-server

# 3. ç¡®è®¤æ¸…ç†å®Œæˆ
qstat -u $USER
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **tmux ä¼šè¯ç®¡ç†**ï¼š

   - `tmux list-sessions` - æŸ¥çœ‹æ‰€æœ‰ä¼šè¯
   - `tmux attach -t ä¼šè¯å` - è¿›å…¥ä¼šè¯
   - `Ctrl+B, D` - é€€å‡ºä½†ä¿æŒä¼šè¯è¿è¡Œ
   - `tmux kill-session -t ä¼šè¯å` - å…³é—­æŒ‡å®šä¼šè¯

2. **ä¼˜å…ˆçº§é¡ºåº**ï¼š

   - å…ˆç”¨ `--status` æŸ¥çœ‹é›†ç¾¤çŠ¶æ€
   - æœ‰ç©ºé—² GPU æ—¶ç”¨ `--request` ç”³è¯·
   - éœ€è¦æŒç»­ç›‘æ§æ—¶ç”¨ tmux åå°è¿è¡Œ

3. **èŠ‚çº¦èµ„æº**ï¼š
   - ä¸ç”¨æ—¶åŠæ—¶é‡Šæ”¾ GPUï¼š`--release ä½œä¸šID`
   - å®šæœŸæ£€æŸ¥ä½œä¸šçŠ¶æ€ï¼š`qstat -u $USER`
   - é¿å…ç”³è¯·è¿‡å¤š GPU èµ„æº

## âš ï¸ æ³¨æ„äº‹é¡¹

- é¦–æ¬¡ä½¿ç”¨å‰ç¡®ä¿åœ¨ `/users/zchen27/ND-Flexible-Sensor` ç›®å½•ä¸‹
- ç”³è¯· GPU å‰å…ˆæŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼Œé¿å…æ— æ•ˆç”³è¯·
- åŠæ—¶é‡Šæ”¾ä¸ä½¿ç”¨çš„ GPU èµ„æºï¼Œæ–¹ä¾¿å…¶ä»–ç”¨æˆ·
- tmux ä¼šè¯ä¼šæŒç»­è¿è¡Œç›´åˆ°æ‰‹åŠ¨å…³é—­

---

**ğŸ¯ æ–°æ‰‹å»ºè®®**ï¼šå…ˆä» `--status` å‘½ä»¤å¼€å§‹ï¼Œç†Ÿæ‚‰ç•Œé¢åå†å°è¯•å…¶ä»–åŠŸèƒ½ï¼



